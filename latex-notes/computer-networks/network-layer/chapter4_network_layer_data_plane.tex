\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amssymb}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{enumitem}
\usepackage{minted} 
\usepackage{booktabs}
\usepackage{tikz}
\usetikzlibrary{shapes, arrows, positioning}

\geometry{margin=1in}
\hypersetup{colorlinks=true, linkcolor=blue, urlcolor=cyan}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\textbf{\TOPICTITLE}}
\fancyhead[R]{\thepage}

% -------------------------------
% Topic Metadata
% -------------------------------
\newcommand{\TOPICTITLE}{Network Layer}
\title{\TOPICTITLE\\\large Study-Ready Notes}
\author{Compiled by Andrew Photinakis}
\date{\today}

\setlength{\headheight}{15pt}

\begin{document}
\maketitle
\tableofcontents
\newpage

\section*{Chapter 4: The Network Layer — Data Plane}

\subsection{4.1 Overview of Network Layer}

% Section 4.1
\subsubsection{4.1.1 Forwarding and Routing: The Data and Control Planes}

Two key functions of the network layer, \textbf{forwarding} and \textbf{routing}, map directly to the \textbf{data plane} and \textbf{control plane}, respectively.

\subsubsection{1. Concept Overview: The Two Core Functions}

Welcome. In our last lecture, we completed our study of the transport layer, which provides a \emph{logical} communication service between \emph{processes} running on different hosts. Now, we move down the stack to examine the network layer, which provides the underlying \emph{host-to-host} communication service that the transport layer relies on.

The network layer's primary role seems simple: to move packets, called \textbf{datagrams}, from a sending host to a receiving host. However, to accomplish this, the network layer must perform two distinct and critical functions: \textbf{forwarding} and \textbf{routing}.

\begin{enumerate}
    \item Forwarding
          \begin{itemize}
              \item Is a \emph{local} action.
              \item The process of taking a packet that has arrived on one of a router's input links and moving it to the appropriate output link.
          \end{itemize}
    \item Routing (Control Plane Function)
          \begin{itemize}
              \item Is a \emph{network-wide} process that determines the end-to-end paths that packets take from a source host to a destination host.
          \end{itemize}
\end{enumerate}

\subsection{Forwarding: The "Data Plane"}

\begin{enumerate}
    \item Definition
          \begin{itemize}
              \item Forwarding refers to the router-local action of transferring a packet from an input link interface to the appropriate output link interface.
              \item Forwarding is the primary function of the network layer's \textbf{data plane}, which includes per-router operations performed on a packet as it moves through the router.
          \end{itemize}
    \item Mechanism
          \begin{itemize}
              \item A packet arrives at a router's input link.
              \item Router examines one or more fields in the packet's header.
              \item Uses header values to index into its forwarding table.
              \item Value found in the forwarding table entry indicates the router's output link interface to which the packet should be forwarded.
          \end{itemize}
    \item Timescale \& Implementation
          \begin{itemize}
              \item Forwarding is a fast (nanosecond) action that must be performed for every packet.
              \item Therefore, it is implemented in hardware.
          \end{itemize}
    \item Analogy
          \begin{itemize}
              \item Forwarding is like navigating a single highway interchange or roundabout: the driver makes a local, split-second decision based on signs.
          \end{itemize}
\end{enumerate}

\subsection{Routing (Control Plane Function)}

\begin{enumerate}
    \item Definition
          \begin{itemize}
              \item Routing refers to the network-wide process of calculating and determining the end-to-end paths that datagrams follow from source to destination.
              \item It is the primary function of the \textbf{control plane}, which governs network-wide routing logic.
          \end{itemize}
    \item Mechanism
          \begin{itemize}
              \item Routing is accomplished by routing algorithms that calculate paths for datagrams.
              \item Routing decisions are installed in the forwarding tables of routers.
          \end{itemize}
    \item Timescale \& Implementation
          \begin{itemize}
              \item Routing computations occur on much longer timescales (seconds to minutes).
              \item Typically implemented in software due to their complexity.
          \end{itemize}
    \item Analogy
          \begin{itemize}
              \item Routing is like planning an entire trip from Pennsylvania to Florida: the routing algorithm (driver) consults a map to select the best end-to-end path.
              \item Each router on the path forwards packets according to the plan.
          \end{itemize}
\end{enumerate}

\subsection{4.1.1.1 The Forwarding Table}

The routing (control plane) controls forwarding (data plane) via the \textbf{forwarding table}.

\begin{itemize}
    \item \textbf{Function:} Router examines header fields of incoming packets, indexes into the forwarding table, and forwards the packet according to the table entry.
    \item \textbf{Origin:} Entries are computed and installed by the control plane. Changes in topology or costs trigger updates.
\end{itemize}

\begin{verbatim}
                                 +---------------------+
                                 |  Routing Algorithm  | (Control Plane)
                                 +---------------------+
                                           |
                                           | (Computes & installs table)
                                           v
+-------------------+            +---------------------+
| Arriving Packet   |            | Local Forwarding    |
| (Header: 0110)    |  --------> | Table               | (Data Plane)
+-------------------+  (Match)   |---------------------|
                                 | 0100 | 3            |
                                 | 0110 | 2  <--------+ (Action: Forward to 2)
                                 | 0111 | 2            |
                                 | 1001 | 1            |
                                 +---------------------+
                                           |
                                           v
                                 (Packet forwarded to output link 2)
\end{verbatim}

\subsection{4.1.1.2 Approaches to the Control Plane}

\textbf{Approach 1: Traditional Per-Router Control}
\begin{itemize}
    \item Control plane runs in each router.
    \item Routing components communicate via routing protocols to compute forwarding tables.
    \item Distributed architecture.
\end{itemize}

\textbf{Approach 2: Software-Defined Networking (SDN)}
\begin{itemize}
    \item Control plane is physically separated from data plane.
    \item A remote controller computes forwarding tables and installs them on all routers.
    \item Routers act as pure data-plane devices.
    \item Controller runs in software, typically on a reliable data center, and communicates with routers using protocols like OpenFlow.
\end{itemize}

\subsection{4.1.1 Summary}

\begin{itemize}
    \item \textbf{Forwarding:} Local, fast, hardware-level data-plane function.
    \item \textbf{Routing:} Network-wide, slower, software-level control-plane function.
    \item \textbf{Data Plane:} Handles forwarding using the forwarding table.
    \item \textbf{Control Plane:} Computes paths and installs forwarding table entries.
    \item \textbf{Forwarding Table:} Links control plane and data plane.
    \item \textbf{Per-Router Control:} Traditional distributed routing model.
    \item \textbf{Logically Centralized Control (SDN):} Centralized controller computes forwarding tables.
\end{itemize}

\section{4.1.2 Network Service Model}

\subsection{1. Concept Overview: The "Contract" of the Network Layer}

The network service model defines the characteristics of end-to-end delivery of packets between sending and receiving hosts. It represents the "contract" between the network and transport layers:

\begin{itemize}
    \item Will the packet be delivered?
    \item Will it arrive intact?
    \item Will it arrive in order?
    \item Will it arrive within a certain time?
    \item Is there a minimum throughput guarantee?
\end{itemize}

\subsection{2. Technical Mechanism: A "Menu" of Possible Services}

Potential services a network layer could offer:

\begin{itemize}
    \item \textbf{Guaranteed Delivery:} Every packet eventually arrives.
    \item \textbf{Guaranteed Delivery with Bounded Delay:} Delivery occurs within a specified time.
    \item \textbf{In-Order Packet Delivery:} Packets arrive in sending order.
    \item \textbf{Guaranteed Minimal Bandwidth:} Network behaves like a dedicated link with a specified bit rate.
    \item \textbf{Security:} Encrypt all datagrams for confidentiality.
\end{itemize}

\subsection{3. Practical and Intuitive View: The Internet's \emph{Actual} Service}

The Internet provides a single service: \textbf{best-effort service}:

\begin{itemize}
    \item Delivery is not guaranteed; packets may be lost.
    \item In-order delivery is not guaranteed; packets may arrive out of order.
    \item Delay is not guaranteed; packets may experience long delays.
    \item Bandwidth is not guaranteed.
\end{itemize}

Design philosophy: \emph{Keep the network core simple.} Reliability, ordering, and congestion control are pushed to the edges (transport/application layers).

\subsection{4. Terminology Clarification: Switches vs. Routers}

\begin{itemize}
    \item \textbf{Packet Switch:} Generic device moving packets from input to output interfaces.
    \item \textbf{Link-Layer Switch:} Layer 2 device forwarding based on MAC addresses.
    \item \textbf{Router:} Layer 3 device forwarding based on network-layer addresses (IP addresses).
\end{itemize}

Focus of this chapter: \textbf{routers} (Layer 3 devices).

\subsection{4.1.2 Summary}

\begin{itemize}
    \item \textbf{Network Service Model:} Defines network guarantees for transport layer.
    \item \textbf{Best-Effort Service:} Internet's minimalist model with no delivery, order, delay, or bandwidth guarantees.
    \item \textbf{Packet Switch, Link-Layer Switch, Router:} Key terminology distinctions.
    \item Minimalist model pushes intelligence to end systems.
\end{itemize}


\section{4.1 Overview of Network Layer}

\subsection{Core Role and Architectural Placement}

\begin{enumerate}
    \item Network layer is third layer of the internet protocol stack
    \item Resides between the transport layer and link layer
    \item Fundamental role is to move network layer packets, called datagrams, from a sending host to a receiving host.
    \item Host-to-Host Communication
          \begin{itemize}
              \item While transport layer provides logical communication between processes, network layer provides logical communication between hosts
          \end{itemize}

    \item Universal Implementation
          \begin{itemize}
              \item Transport and application layers run only on end systems (hosts)
              \item Network layer runs in every host and router in network
              \item It's esential b/c routers must examine datagram headers to perform their forwarding function
          \end{itemize}
    \item Router Protocol Stack
          \begin{itemize}
              \item Routers are network-layer (Layer 3) devices
              \item Consist of "truncated" protocol stack, implementing physical, link, and network layers
              \item Do not implement transport or application layers
              \item Sole purpose is to forward datagrams, not run end-user applications
          \end{itemize}
    \item At Each Stage
          \begin{enumerate}
              \item Sending Host
                    \begin{itemize}
                        \item Network layer takes segments from transport layer, encapsulates them into datagrams, and sends these datagrams to its nearby router
                    \end{itemize}
              \item Receiving Host
                    \begin{itemize}
                        \item Network layer receives datagrams from its nearby router, extracts transport-layer segments, and delviers them up to transport layer
                    \end{itemize}

              \item Routers
                    \begin{itemize}
                        \item Core function to examine header of an arriving datagram and forward it to appropriate output link
                        \item Routers are 'Layer 3' devices
                        \item Typically have a 'truncated' protocol stack, implementing up to network layer but not transport or application layers
                    \end{itemize}
          \end{enumerate}
\end{enumerate}


\subsection{Planes}

\subsubsection{Data Plane}
\begin{itemize}
    \item Performs per-touer function of forwarding datagrams from a router's input link to its appropriate output link
\end{itemize}

\subsubsection{Control Plane}
\begin{itemize}
    \item Performs network-wide logic that controls how datagrams are routed along an end-to-end path from source to destination host
\end{itemize}


% Section 4.2
\input{sections/4_2_whats_inside_a_router/4_2_whats_inside_a_router.tex}

% Section 4.3

\section{4.3 The Internet Protocol (IP): IPv4, Addressing, IPv6, and More}

\subsection{Overview}
\begin{itemize}
    \item Delves into foundational protocols and addressing schemes of the Internet Protocol (IP) that enable the Internet's network layer.
    \item IP Protocol provides essential, unreliable, best-effort delviery service that underpins all higher-layer communcation
    \item IP Protocol is hte only network-layuer protocol used in the Internet
\end{itemize}

\subsubsection{IP Protocol}
\begin{itemize}
    \item Is the only network-layer protocol in the internet
    \item Is the "narrow waist" of the hourglass, the single protocol that everything else - every transport protocol (TCP, UDP) and every applciaiton (HTTP, DNS) - must run on top of
    \item In turn must be able to run over any link-layer technology (Ethernet, WiFi, 4G, etc)
\end{itemize}
\section{4.3.1 IPv4 Datagram Format}

\subsection{Concept Overview}

\begin{description}
    \item[Datagram:]
          \begin{enumerate}
              \item The Internet's network-layer packet is known as a \textbf{datagram}.
              \item Fundamental to understanding IP's operations.
              \item Format is defined in \textbf{RFC 791}.
              \item IPv4 datagram has a variable-length header:
                    \begin{itemize}
                        \item Typically 20 bytes long when no options are present.
                        \item Followed by a payload (data field).
                    \end{itemize}
              \item Composed of two main parts:
                    \begin{enumerate}
                        \item \textbf{Header:} Contains all information a router needs to make forwarding decisions.
                        \item \textbf{Data (Payload):} Contains the data being transported, typically a transport-layer segment (like TCP or UDP).
                    \end{enumerate}
          \end{enumerate}
\end{description}

\subsection{Technical Mechanism: The Datagram Format}

\begin{itemize}
    \item A textual representation of the IPv4 header:
          \begin{verbatim}
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version|  IHL  |Type of Service|          Total Length         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Identifier            |Flags|      Fragment Offset    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Time-to-Live |    Protocol   |         Header Checksum       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Source IP Address                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Destination IP Address                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Options (if any) ...                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Data (Payload)                         |
|                             ...                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\end{verbatim}

    \item Key Header Fields and Their Purpose:
          \begin{enumerate}
              \item \textbf{Version (4 bits):}
                    \begin{enumerate}
                        \item Specifies IP protocol verstion
                        \item For IPv4, this is always 4.
                        \item Route examines this field first to know how to parse the rest of the header (e.g. to know that it should expect an IPv4 header, not IPv6 header)
                    \end{enumerate}
              \item \textbf{IHL (Internet Header Length) (4 bits):}
                    \begin{enumerate}
                        \item Specifies length of IP header in 32-bit words
                        \item Field is necessary because 'Options' field can make header variable-length
                        \item Required to find stasrt of a data/payload fields
                        \item Typical heder length is 20 bytes (5 words)
                    \end{enumerate}
              \item \textbf{Type of Service (TOS) (8 bits):} Indicates priority and routing preferences.
                    \begin{enumerate}
                        \item Included to allow different types of IP datagrams (e.g. real-time vs non-real time) to be distinguished and serviced differently (e.g. with priority or low-delay)
                        \item Bits are also used in Explicit Congestion Notification (ECN)
                    \end{enumerate}
              \item \textbf{Datagram Length (16 bits):} Length of the entire datagram (header + payload).
                    \begin{enumerate}
                        \item Total length of IP datagraam (header + payload) in bytes
                        \item Practial View:
                              \begin{enumerate}
                                  \item A 16-bit field allows for theoretical maximum datagram size of 65,535 bytes
                                  \item However, datagrams are rarely larger  than 1,500 bytes because they must fit within the Maximum Transmission Unit (MTU) of udnerlying link-layer to avoid fragmentation
                              \end{enumerate}
                    \end{enumerate}
              \item \textbf{Identifier, Flags, Fragmentation Offset (32 bits total):} Identifies fragments of the original datagram.
                    \begin{enumerate}
                        \item Fields are all used for IP fragmentation
                        \item If router needs to forward a datagram onto a link with an MTU smaller than datagram's size, it can "fragment" datagram into multiple smaller datagrams
                        \item Such smaller datagreams are reassembled only at final destination
                        \item This is a slow, complex process, and IPv6 gets rid of it entirely for routes
                    \end{enumerate}
              \item \textbf{Time-to-Live (TTL) (8 bits):} Limits the datagram’s lifetime to prevent infinite loops.
                    \begin{enumerate}
                        \item Critical safety mechanism to ensure datagrams don't circulate forever in network (e.g. in a routing loop)
                        \item TTL field is decremented by one at every router is passes through
                        \item If router receives a datagram with a TTL of 1, it decrements it to 0, discards the datagram, and sends an ICMP error message back to source
                    \end{enumerate}
              \item \textbf{Protocol (8 bits):} Specifies the transport protocol in the payload (e.g., TCP, UDP).
                    \begin{enumerate}
                        \item Binds network layer to transport layer
                        \item Used only at final destination host to indicate which transport-layer protocol should receive datagram's payload
                              \begin{enumerate}
                                  \item 6 = TCP
                                  \item 17 = UDP
                                  \item 1 = ICMP (Internet Control Message Protocol)
                              \end{enumerate}
                    \end{enumerate}

              \item \textbf{Header Checksum (16 bits):} Error-checking for the header.
                    \begin{enumerate}
                        \item Performs error detection on header only, not on payload
                        \item Computed using 1s complement arithmetic over 2-byte units of the header
                        \item Must be recomputed at every router because TTL field changes
                        \item Why only header?
                              \begin{enumerate}
                                  \item Transport layer (TCP/UDP) performs its own checksum on payload
                                  \item TTL field changes at every route. Means header must be altered. Checksum must be recomputer and restored at every single router, which is time consuming
                              \end{enumerate}
                    \end{enumerate}
              \item \textbf{Source and Destination IP Address (32 bits each):} Addresses of originating and final destination interfaces
                    \begin{enumerate}
                        \item Fields contain 32-bit IP addresses of original src and final dest
                        \item Src address inserted by sending host
                        \item Dest address obtained from a DNS lookup
                    \end{enumerate}
              \item \textbf{Options (if any) (variable length):} Optional fields for control or security.
                    \begin{enumerate}
                        \item Field allows IP header to be extended, but rarely used
                        \item Can be problematic because makes header length variable, complkicating and slowing down router processing
                    \end{enumerate}
              \item \textbf{Data (Payload):} Actual transported data (e.g., TCP/UDP segment).
          \end{enumerate}
\end{itemize}

% TEMPLATE EXAMPLE
\subsection{Template Example}

\begin{itemize}
    \item X
          \begin{enumerate}
              \item Y
          \end{enumerate}
\end{itemize}
\section{4.3.2 IPv4 Addressing}


\subsection{Concept Overview: Interfaces and Subnets}
\begin{itemize}
    \item IP Addresses and Interfaces
          \begin{enumerate}
              \item IP addr is 32 bits long
              \item IP addr associated with a router or host interface, not device itself
              \item Router has multiple interfaces (one per link), and thus multiple IP addrs
              \item Hosts typically have one interface (and one IP address) connecting them to network
              \item Addresses are writting in dotted-decimal notation
          \end{enumerate}
\end{itemize}

\subsection{Technical Mechanism: The IP Subnet}

\begin{itemize}
    \item IP addresses not assigned randomly
    \item Portion of address is determined by network interface connected to
    \item /24 notation is subnet mask
          \begin{enumerate}
              \item Indicates that leftmost 24 bits define subnet, and remaining (32-24) = 8 bits identify specific interfaces on that subnet
          \end{enumerate}
    \item Recipe for Identifying Subnets
          \begin{enumerate}
              \item Detach every interface from its host or source
              \item This creates "islands" of isolated networks
              \item Each island is a subnet
          \end{enumerate}
    \item Subnets
          \begin{enumerate}
              \item IP subnet is a network that connects multiple host interfaces and router interfaces,
              \item Forms isolated network without intervening routers
          \end{enumerate}
    \item Subnet Addressing
          \begin{enumerate}
              \item Interfaces on given subnet share same high-order bits of their IP addresses
              \item Notation (CIDR)
                    \begin{enumerate}
                        \item A subnet address is denoted by form a.b.c.d/x, where /x indicates number of high-order bits that constitute network portion of address
                    \end{enumerate}
          \end{enumerate}

\end{itemize}


\subsection{Concept: CIDR (Classless Inter-Domain Routing)}

\begin{enumerate}
    \item Is a flexible IP address assignment strategy that replaced older class-based system
    \item Introduced /x notation, where x specifies how many bits of the address form network prefix
\end{enumerate}


\begin{itemize}
    \item Mechanism
          \begin{enumerate}
              \item CIDR generalizes traditional subnet and hsot division
                    \begin{enumerate}
                        \item In address a.b.c.d/x
                        \item x most significant bits are prefix
                        \item Remaining 32 - x bits are host portion
                    \end{enumerate}
              \item Allows networks to have variable-length prefixes, making address allocation more flexible
          \end{enumerate}
    \item Scalability via Address Aggregation
          \begin{enumerate}
              \item Organizations are assigned contiguous blocks of IP addresses with a common prefix
              \item Routers outside of org only need one entry in their forwarding tables.
                    \begin{enumerate}
                        \item "To reach any address startingt with 200.23.16.0/20, forward to that orgs ISP"
                    \end{enumerate}
              \item Ability to use single prefix to advertise many networks = address aggregation (or route aggregation)
              \item Essential for keeping global routing tables small and manageble
          \end{enumerate}
\end{itemize}

\subsection{Obtaining and Managing IP Addresses}
\begin{enumerate}
    \item Getting a block of addresses (for an ISP or large org)
          \begin{enumerate}
              \item Global authority is ICANN (Internet Corporation for Assigned Names and Numbers)
              \item ICANN allocates address blocks to Regional Internet Registries (RIRs)
              \item An ISP (like Comcast, or Verizon) gets its address blocks from its RIR
              \item An org gets its address blocks from its ISP
              \item Hierarchical allocation allows for route aggregation
          \end{enumerate}
    \item Getting a host address (DHCP)
          \begin{enumerate}
              \item Once org has blocks of addresses (e.g. 68.85.2.0/24) it needs to assign individual addresses to its hosts
              \item Done automatically by Dynamic Host Configuration Protocol (DHCP)
              \item DHCP - is a plug and play protocol. When your laptop connects to a network, uses DHCP to automatically get
                    \begin{enumerate}
                        \item Its IP address (e.g. 68.85.2.101)
                        \item Its subnet mask (e.g. /24)
                        \item IP address of default gateway (first hop router)
                        \item IP address of local DNS server
                    \end{enumerate}
              \item How DHCP works?
                    \begin{enumerate}
                        \item DHCP Discover
                              \begin{enumerate}
                                  \item New host client sends broadcast message (Dest IP: 255.255.255.255, Souce IP: 0.0.0.0)
                                  \item Asks "is there a DHCP server out there?"
                              \end{enumerate}
                        \item DHCP Offer
                              \begin{enumerate}
                                  \item A DHCP server (typically on the router) receives the discover and replies with offer message
                                  \item Includes proposing an IP address, lease time, etc.
                              \end{enumerate}
                        \item DHCP Request
                              \begin{enumerate}
                                  \item Client formally requests offered address by sending a broadcast "request" message
                                  \item This tells any other servers that sent offers that they weren't chosen
                              \end{enumerate}
                        \item DHCP ACK
                              \begin{enumerate}
                                  \item Server confirms allocation with a "DHCP ACK" message
                                  \item Client can now use IP address
                              \end{enumerate}
                    \end{enumerate}
          \end{enumerate}
\end{enumerate}



% TEMPLATE EXAMPLE
\subsection{Template Example}

\begin{itemize}
    \item X
          \begin{enumerate}
              \item Y
          \end{enumerate}
\end{itemize}



% Section 4.4
\input{sections/4_4_generalized_forwarding_and_sdn/4_4_generalized_forwarding_and_sdn.tex}

% Section 4.5
\input{sections/4_5_middleboxes/4_5_middleboxes.tex}


\end{document}
